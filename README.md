# MCP Servers ä»“åº“

ä¸€ä¸ªåŒ…å«å¤šä¸ª Model Context Protocol (MCP) æœåŠ¡å™¨çš„ monorepoï¼Œä¸ºå„ç§ç¬¬ä¸‰æ–¹å¹³å°æä¾›æ— ç¼é›†æˆèƒ½åŠ›ã€‚

## ğŸ¯ é¡¹ç›®æ¦‚è§ˆ

æœ¬é¡¹ç›®æä¾›äº†ä¸€ç³»åˆ—é«˜è´¨é‡çš„ MCP æœåŠ¡å™¨ï¼Œè®© AI åŠ©æ‰‹èƒ½å¤Ÿä¸å„ç§å¤–éƒ¨æœåŠ¡å’Œå¹³å°è¿›è¡Œäº¤äº’ã€‚æ¯ä¸ªæœåŠ¡å™¨éƒ½ç»è¿‡ç²¾å¿ƒè®¾è®¡ï¼Œæä¾›ç±»å‹å®‰å…¨ã€é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„ä½“éªŒã€‚

### ğŸš€ æ”¯æŒçš„æœåŠ¡å™¨

| æœåŠ¡å™¨ | æè¿° | ä¸»è¦åŠŸèƒ½ |
|--------|------|----------|
| **[Confluence MCP](./packages/confluence-mcp/)** | Confluence é¡µé¢äº¤äº’å·¥å…· | é¡µé¢å†…å®¹è·å–å’Œç®¡ç† |
| **[Feishu MCP](./packages/feishu-mcp/)** | é£ä¹¦/Lark é›†æˆæœåŠ¡å™¨ | Wiki ç®¡ç†ã€æ–‡æ¡£æ“ä½œã€OAuth è®¤è¯ |
| **[Weapons MCP](./packages/weapons-mcp/)** | Weapons API æ–‡æ¡£å¹³å°é›†æˆ | API æ–‡æ¡£è·å–ã€ç«¯ç‚¹è¯¦æƒ…æŸ¥è¯¢ |
| **[Core](./packages/core/)** | æ ¸å¿ƒå·¥å…·åŒ… | CLI å·¥å…·ã€å…±äº«ç»„ä»¶å’Œç±»å‹å®šä¹‰ |

## âœ¨ ç‰¹æ€§

- ğŸ”§ **TypeScript ä¼˜å…ˆ**: å®Œæ•´çš„ç±»å‹æ”¯æŒå’Œ IntelliSense
- ğŸ—ï¸ **æ¨¡å—åŒ–æ¶æ„**: æ¯ä¸ªæœåŠ¡å™¨éƒ½æ˜¯ç‹¬ç«‹çš„åŒ…ï¼Œå¯å•ç‹¬å®‰è£…å’Œä½¿ç”¨
- ğŸ” **å®‰å…¨è®¤è¯**: å†…ç½®å®‰å…¨çš„å‡­æ®ç®¡ç†å’Œ OAuth æµç¨‹
- ğŸ› ï¸ **å¼€å‘å‹å¥½**: çƒ­é‡è½½ã€æµ‹è¯•å¥—ä»¶å’Œä»£ç æ£€æŸ¥
- ğŸ“± **å¤šå®¢æˆ·ç«¯æ”¯æŒ**: å…¼å®¹ Cursorã€Gemini CLI ç­‰ MCP å®¢æˆ·ç«¯
- ğŸ¯ **é”™è¯¯å¤„ç†**: å…¨é¢çš„é”™è¯¯å¤„ç†å’Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æ¶ˆæ¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç³»ç»Ÿè¦æ±‚

- Node.js 18+
- pnpm åŒ…ç®¡ç†å™¨

### å®‰è£…ä¾èµ–

```bash
# å…‹éš†ä»“åº“
git clone <repository-url>
cd mcp-servers

# å®‰è£…ä¾èµ–
pnpm install

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build
```

### é€‰æ‹©å¹¶é…ç½®æœåŠ¡å™¨

æ ¹æ®ä½ çš„éœ€æ±‚é€‰æ‹©ç›¸åº”çš„æœåŠ¡å™¨ï¼š

#### Feishu MCP æœåŠ¡å™¨
```bash
cd packages/feishu-mcp

# é…ç½®è®¤è¯
pnpm run cli -- login

# å®‰è£…åˆ° MCP å®¢æˆ·ç«¯
pnpm run cli -- install --client cursor
```

#### Weapons MCP æœåŠ¡å™¨
```bash
cd packages/weapons-mcp

# äº¤äº’å¼é…ç½®å’Œå®‰è£…
weapons-mcp install --client cursor --global
```

#### Confluence MCP æœåŠ¡å™¨
```bash
cd packages/confluence-mcp

# æ„å»ºå¹¶å¯åŠ¨
pnpm build
pnpm start
```

## ğŸ“¦ å„æœåŠ¡å™¨è¯¦ç»†ä»‹ç»

### ğŸ”— Confluence MCP

ç®€å•å®ç”¨çš„ Confluence é¡µé¢äº¤äº’å·¥å…·ã€‚

**ä¸»è¦åŠŸèƒ½:**
- è·å– Confluence é¡µé¢å†…å®¹
- é¡µé¢ç®¡ç†æ“ä½œ

**[æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ â†’](./packages/confluence-mcp/README.md)**

### ğŸ“± Feishu MCP

åŠŸèƒ½å®Œæ•´çš„é£ä¹¦/Lark é›†æˆæœåŠ¡å™¨ï¼Œæ”¯æŒ Wiki å’Œæ–‡æ¡£ç®¡ç†ã€‚

**ä¸»è¦åŠŸèƒ½:**
- **Wiki ç®¡ç†**: åˆ—è¡¨ã€æµè§ˆå’Œåˆ›å»º wiki ç©ºé—´å’ŒèŠ‚ç‚¹
- **æ–‡æ¡£æ“ä½œ**: åˆ›å»ºã€è¯»å–å’Œæ›´æ–°é£ä¹¦æ–‡æ¡£
- **è®¤è¯ç®¡ç†**: å®‰å…¨çš„ä»¤ç‰Œç®¡ç†å’Œè‡ªåŠ¨ OAuth æµç¨‹
- **CLI å·¥å…·**: å®Œæ•´çš„å‘½ä»¤è¡Œç•Œé¢

**å¯ç”¨å·¥å…·:**
- `list-wiki-spaces`: è·å–æ‰€æœ‰å¯è®¿é—®çš„ wiki ç©ºé—´
- `get-space-nodes`: è·å– wiki ç©ºé—´ä¸­çš„æ–‡æ¡£
- `create-wiki-node`: åœ¨ wiki ç©ºé—´ä¸­åˆ›å»ºæ–°èŠ‚ç‚¹
- `create-document`: åˆ›å»ºæ–°çš„é£ä¹¦æ–‡æ¡£
- `get-document-content`: è·å–æ–‡æ¡£å†…å®¹
- `update-document`: æ›´æ–°æ–‡æ¡£å†…å®¹

**[æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ â†’](./packages/feishu-mcp/README.md)**

### âš”ï¸ Weapons MCP

ä¸“ä¸º Weapons API æ–‡æ¡£å¹³å°è®¾è®¡çš„é›†æˆæœåŠ¡å™¨ã€‚

**ä¸»è¦åŠŸèƒ½:**
- **API æ–‡æ¡£è®¿é—®**: ä» Weapons å¹³å°è·å– API ç«¯ç‚¹å’Œæ–‡æ¡£
- **åˆ†ç±»æ£€ç´¢**: è·å–ç‰¹å®šåˆ†ç±»ä¸‹çš„æ‰€æœ‰ç«¯ç‚¹
- **è¯¦ç»†ä¿¡æ¯**: è·å–å•ä¸ª API ç«¯ç‚¹çš„è¯¦ç»†ä¿¡æ¯
- **ç»“æ„åŒ–æ•°æ®**: æ¸…æ´ã€ç»“æ„åŒ–çš„ API ä¿¡æ¯å’Œè¯·æ±‚/å“åº”æ¨¡å¼
- **é…ç½®ç®¡ç†**: å®‰å…¨çš„å‡­æ®ç®¡ç†å’Œç¯å¢ƒé…ç½®

**å¯ç”¨å·¥å…·:**
- `get-endpoints`: è·å–åˆ†ç±»ä¸‹çš„æ‰€æœ‰ API ç«¯ç‚¹
- `get-endpoint-detail`: è·å–ç‰¹å®šç«¯ç‚¹çš„è¯¦ç»†ä¿¡æ¯

**[æŸ¥çœ‹è¯¦ç»†æ–‡æ¡£ â†’](./packages/weapons-mcp/README.md)**

### ğŸ”§ Core

ä¸ºå…¶ä»– MCP æœåŠ¡å™¨æä¾›æ ¸å¿ƒåŠŸèƒ½å’Œå·¥å…·çš„åŸºç¡€åŒ…ã€‚

**æä¾›åŠŸèƒ½:**
- CLI æ¡†æ¶å’Œå·¥å…·
- å…±äº«ç±»å‹å®šä¹‰
- é€šç”¨å·¥å…·å‡½æ•°
- å®‰è£…å’Œé…ç½®åŠ©æ‰‹

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### é¡¹ç›®ç»“æ„

```
mcp-servers/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ confluence-mcp/     # Confluence é›†æˆ
â”‚   â”œâ”€â”€ feishu-mcp/         # é£ä¹¦é›†æˆ
â”‚   â”œâ”€â”€ weapons-mcp/        # Weapons é›†æˆ
â”‚   â””â”€â”€ core/               # æ ¸å¿ƒå·¥å…·åŒ…
â”œâ”€â”€ scripts/                # æ„å»ºå’Œå·¥å…·è„šæœ¬
â”œâ”€â”€ package.json            # æ ¹çº§ä¾èµ–å’Œè„šæœ¬
â”œâ”€â”€ pnpm-workspace.yaml     # pnpm å·¥ä½œç©ºé—´é…ç½®
â””â”€â”€ tsconfig.json           # TypeScript é…ç½®
```

### å¼€å‘å‘½ä»¤

```bash
# å®‰è£…æ‰€æœ‰ä¾èµ–
pnpm install

# æ„å»ºæ‰€æœ‰åŒ…
pnpm build

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
pnpm test

# è¿è¡Œä»£ç æ£€æŸ¥
pnpm lint

# ä¿®å¤ä»£ç æ ¼å¼
pnpm lint:fix

# ç”Ÿæˆæµ‹è¯•è¦†ç›–ç‡æŠ¥å‘Š
pnpm coverage
```

### å¼€å‘å•ä¸ªåŒ…

```bash
# è¿›å…¥ç‰¹å®šåŒ…ç›®å½•
cd packages/feishu-mcp

# å¼€å‘æ¨¡å¼ï¼ˆçƒ­é‡è½½ï¼‰
pnpm dev

# ä½¿ç”¨ MCP inspector è°ƒè¯•
pnpm inspector

# è¿è¡ŒåŒ…æµ‹è¯•
pnpm test

# æ„å»ºåŒ…
pnpm build
```

### åˆ›å»ºæ–°çš„ MCP æœåŠ¡å™¨

1. åœ¨ `packages/` ç›®å½•ä¸‹åˆ›å»ºæ–°ç›®å½•
2. å‚è€ƒç°æœ‰æœåŠ¡å™¨çš„ç»“æ„å’Œæ¨¡å¼
3. ç¡®ä¿åŒ…å«å¿…è¦çš„æ–‡ä»¶ï¼š
   - `package.json`
   - `tsconfig.json`
   - `README.md`
   - `src/index.ts`
   - `tests/`

## ğŸ—ï¸ æŠ€æœ¯æ ˆ

- **è¯­è¨€**: TypeScript
- **åŒ…ç®¡ç†**: pnpm (workspace)
- **æ„å»ºå·¥å…·**: TSX
- **æµ‹è¯•æ¡†æ¶**: Vitest
- **ä»£ç æ£€æŸ¥**: ESLint + TypeScript ESLint
- **æ ¼å¼åŒ–**: Stylistic ESLint Plugin
- **Git é’©å­**: Husky + lint-staged
- **æäº¤è§„èŒƒ**: Commitlint

## ğŸ”§ æ”¯æŒçš„ MCP å®¢æˆ·ç«¯

æœ¬é¡¹ç›®çš„æœåŠ¡å™¨å…¼å®¹ä»¥ä¸‹ MCP å®¢æˆ·ç«¯ï¼š

- **Cursor**: é¡¹ç›®çº§å’Œå…¨å±€å®‰è£…
- **Gemini CLI**: é¡¹ç›®çº§å’Œå…¨å±€å®‰è£…
- **Claude Desktop**: é€šè¿‡æ‰‹åŠ¨é…ç½®æ”¯æŒ

### é…ç½®ç¤ºä¾‹

#### Cursor

```json
{
  "mcpServers": {
    "feishu": {
      "command": "tsx",
      "args": ["/path/to/feishu-mcp/src/index.ts"],
      "type": "stdio"
    }
  }
}
```

#### Claude Desktop

```json
{
  "mcpServers": {
    "weapons": {
      "command": "node",
      "args": ["/path/to/weapons-mcp/dist/index.js"],
      "env": {
        "WEAPONS_TOKEN": "your_token",
        "WEAPONS_UID": "your_uid"
      }
    }
  }
}
```

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿ä»»ä½•å½¢å¼çš„è´¡çŒ®ï¼è¯·éµå¾ªä»¥ä¸‹æ­¥éª¤ï¼š

1. **Fork é¡¹ç›®**
2. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**: `git checkout -b feature/amazing-feature`
3. **éµå¾ªä»£ç è§„èŒƒ**: ç¡®ä¿é€šè¿‡ ESLint æ£€æŸ¥
4. **æ·»åŠ æµ‹è¯•**: ä¸ºæ–°åŠŸèƒ½æ·»åŠ ç›¸åº”çš„æµ‹è¯•ç”¨ä¾‹
5. **æäº¤æ›´æ”¹**: ä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯
6. **æ¨é€åˆ†æ”¯**: `git push origin feature/amazing-feature`
7. **åˆ›å»º Pull Request**

### æäº¤ä¿¡æ¯è§„èŒƒ

æœ¬é¡¹ç›®ä½¿ç”¨ [Conventional Commits](https://conventionalcommits.org/) è§„èŒƒï¼š

```bash
feat: æ·»åŠ æ–°åŠŸèƒ½
fix: ä¿®å¤ bug
docs: æ›´æ–°æ–‡æ¡£
style: ä»£ç æ ¼å¼è°ƒæ•´
refactor: ä»£ç é‡æ„
test: æ·»åŠ æˆ–ä¿®æ”¹æµ‹è¯•
chore: æ„å»ºè¿‡ç¨‹æˆ–è¾…åŠ©å·¥å…·çš„å˜åŠ¨
```

### ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript ä¸¥æ ¼æ¨¡å¼
- éµå¾ª ESLint é…ç½®
- ä¿æŒæµ‹è¯•è¦†ç›–ç‡
- æ·»åŠ å¿…è¦çš„æ–‡æ¡£å’Œæ³¨é‡Š
- ä½¿ç”¨æœ‰æ„ä¹‰çš„å˜é‡å’Œå‡½æ•°å

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®ä½¿ç”¨ [MIT](LICENSE) è®¸å¯è¯ã€‚

## ğŸ†˜ è·å–å¸®åŠ©

- **é—®é¢˜æŠ¥å‘Š**: [GitHub Issues](https://github.com/your-repo/issues)
- **åŠŸèƒ½è¯·æ±‚**: [GitHub Discussions](https://github.com/your-repo/discussions)
- **æ–‡æ¡£**: æŸ¥çœ‹å„ä¸ªåŒ…çš„ README æ–‡ä»¶

## ğŸ”„ æ›´æ–°æ—¥å¿—

æŸ¥çœ‹ [CHANGELOG.md](CHANGELOG.md) äº†è§£ç‰ˆæœ¬æ›´æ–°å†å²ã€‚

---

**ğŸ‰ æ„Ÿè°¢ä½¿ç”¨ MCP Serversï¼** 

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·è€ƒè™‘ç»™æˆ‘ä»¬ä¸€ä¸ª â­ Starï¼

